<!DOCTYPE html>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const resultContainer = document.getElementById("resultContainer");
  const obs = JSON.parse(localStorage.getItem("latestObservation"));

  if (!obs || obs.length === 0) {
    resultContainer.innerHTML = "<p>No observation data found.</p>";
    return;
  }

  // Example: display the first observation
  const firstObs = obs[0];
  resultContainer.innerHTML = `
    <h2>Observation for ${firstObs.date}</h2>
    <p>Sunset: ${firstObs.sunset}</p>
    <p>Dark sky starts: ${firstObs.dark_sky}</p>
    <p>Sunrise: ${firstObs.sunrise}</p>
    <p>Planets visible: ${firstObs.planets.join(", ")}</p>
    <p>Stars: ${firstObs.stars.join(", ")}</p>
    <p>Moon illumination: ${firstObs.moon_illum}</p>
  `;
});
</script>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Observation Results</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="container">
    <h2>Observation for {{ observation.date }}</h2>

    <p><strong>Sunset:</strong> {{ observation.sunset }}</p>
    <p><strong>Dark Sky Begins:</strong> {{ observation.dark_sky }}</p>
    <p><strong>Sunrise:</strong> {{ observation.sunrise }}</p>
    <p><strong>Moon Illumination:</strong> {{ observation.moon_illum }}</p>

    <h3>Visible Planets</h3>
    {% if observation.planets %}
      <ul>
        {% for planet in observation.planets %}
          <li>{{ planet }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>None visible</p>
    {% endif %}

    <h3>Notable Stars</h3>
    {% if observation.stars %}
      <ul>
        {% for star in observation.stars %}
          <li>{{ star }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No prominent stars listed</p>
    {% endif %}

    <form action="/" method="GET">
      <button type="submit">Check Another Date</button>
    </form>
  </div>
</body>
</html>
